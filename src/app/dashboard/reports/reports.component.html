
<div class="app-container">
  <!-- Sidebar Navigation -->
  <div class="sidebar">
    <div class="logo-container">
      <div class="logo">
        <span>T</span>
      </div>
      <h2 class="app-name">Thera-Mind</h2>
      <button class="close-sidebar">&times;</button>
    </div>
    
    <nav class="nav-menu">
      <ul>
        <li>
          <a href="/dash">
            <i class="fas fa-th-large"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li>
          <a href="/apoint">
            <i class="far fa-calendar-alt"></i>
            <span>Appointments</span>
          </a>
        </li>
        <li>
          <a href="/thera">
            <i class="fas fa-user-md"></i>
            <span>Therapists</span>
          </a>
        </li>
        <li>
          <a href="/client">
            <i class="fas fa-users"></i>
            <span>Clients</span>
          </a>
        </li>
        <li class="active">
          <a href="/reports">
            <i class="far fa-chart-bar"></i>
            <span>Reports</span>
          </a>
        </li>
        <li>
          <a href="/settings">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
          </a>
        </li>
      </ul>
    </nav>
    
    <div class="logout-container">
      <a href="/logout" class="logout-btn">
        <i class="fas fa-sign-out-alt"></i>
        <span>Logout</span>
      </a>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Header -->
    <header class="main-header">
      <div class="page-title">
        <h1>Reports & Analytics</h1>
      </div>
      <div class="header-right">
        <div class="date-range-selector">
          <select id="date-range">
            <option value="last7days">Last 7 Days</option>
            <option value="last30days" selected>Last 30 Days</option>
            <option value="last3months">Last 3 Months</option>
            <option value="last6months">Last 6 Months</option>
            <option value="lastyear">Last Year</option>
            <option value="custom">Custom Range</option>
          </select>
        </div>
        <div class="notifications">
          <i class="far fa-bell"></i>
          <span class="notification-badge">3</span>
        </div>
        <div class="admin-profile">
          <span class="admin-name">Admin</span>
          <div class="avatar">
            <span>A</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Reports Content -->
    <div class="reports-content">
      <!-- Summary Cards -->
      <div class="summary-cards">
        <div class="summary-card">
          <div class="card-icon">
            <i class="fas fa-users"></i>
          </div>
          <div class="card-content">
            <h3>Total Clients</h3>
            <p class="card-value">{{ getTotalClients() }}</p>
            <p class="card-trend positive"><i class="fas fa-arrow-up"></i> 12% from last month</p>
          </div>
        </div>
        
        <div class="summary-card">
          <div class="card-icon">
            <i class="fas fa-user-md"></i>
          </div>
          <div class="card-content">
            <h3>Total Therapists</h3>
            <p class="card-value">{{ getTotalTherapists() }}</p>
            <p class="card-trend positive"><i class="fas fa-arrow-up"></i> 5% from last month</p>
          </div>
        </div>
        
        <div class="summary-card">
          <div class="card-icon">
            <i class="far fa-calendar-check"></i>
          </div>
          <div class="card-content">
            <h3>Sessions Completed</h3>
            <p class="card-value">{{ getCompletedSessions() }}</p>
            <p class="card-trend positive"><i class="fas fa-arrow-up"></i> 8% from last month</p>
          </div>
        </div>
        
        <div class="summary-card">
          <div class="card-icon">
            <i class="fas fa-dollar-sign"></i>
          </div>
          <div class="card-content">
            <h3>Revenue</h3>
            <p class="card-value">${{ getTotalRevenue() }}</p>
            <p class="card-trend positive"><i class="fas fa-arrow-up"></i> 15% from last month</p>
          </div>
        </div>
      </div>

      <!-- Charts Section -->
      <div class="charts-section">
        <div class="chart-container sessions-chart">
          <div class="chart-header">
            <h3>Sessions Overview</h3>
            <div class="chart-actions">
              <button class="chart-action-btn active">Weekly</button>
              <button class="chart-action-btn">Monthly</button>
              <button class="chart-action-btn">Yearly</button>
            </div>
          </div>
          <div class="chart-body">
            <!-- Placeholder for chart -->
            <div class="chart-placeholder">
              <div class="chart-bars">
                <div class="chart-bar" *ngFor="let item of sessionsData; let i = index" 
                     [style.height]="(item.value / getMaxSessionValue() * 100) + '%'">
                  <span class="bar-value">{{ item.value }}</span>
                </div>
              </div>
              <div class="chart-labels">
                <span *ngFor="let item of sessionsData">{{ item.label }}</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="chart-container revenue-chart">
          <div class="chart-header">
            <h3>Revenue Trends</h3>
            <div class="chart-actions">
              <button class="chart-action-btn active">Weekly</button>
              <button class="chart-action-btn">Monthly</button>
              <button class="chart-action-btn">Yearly</button>
            </div>
          </div>
          <div class="chart-body">
            <!-- Placeholder for chart -->
            <div class="chart-placeholder line-chart">
              <svg viewBox="0 0 300 100" preserveAspectRatio="none">
                <polyline points="0,80 50,70 100,40 150,30 200,50 250,20 300,10" 
                          fill="none" stroke="#6366f1" stroke-width="2"></polyline>
                <polyline points="0,80 50,70 100,40 150,30 200,50 250,20 300,10" 
                          fill="rgba(99, 102, 241, 0.1)" stroke="none"></polyline>
              </svg>
              <div class="chart-labels">
                <span>Mon</span>
                <span>Tue</span>
                <span>Wed</span>
                <span>Thu</span>
                <span>Fri</span>
                <span>Sat</span>
                <span>Sun</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Performance Metrics -->
      <div class="metrics-section">
        <div class="section-header">
          <h2>Performance Metrics</h2>
          <button class="export-btn">
            <i class="fas fa-download"></i> Export Report
          </button>
        </div>
        
        <div class="metrics-grid">
          <div class="metric-card">
            <h3>Client Retention Rate</h3>
            <div class="progress-container">
              <div class="progress-bar" [style.width]="'85%'"></div>
              <span class="progress-value">85%</span>
            </div>
            <p class="metric-comparison">+5% from previous period</p>
          </div>
          
          <div class="metric-card">
            <h3>Session Completion Rate</h3>
            <div class="progress-container">
              <div class="progress-bar" [style.width]="'92%'"></div>
              <span class="progress-value">92%</span>
            </div>
            <p class="metric-comparison">+2% from previous period</p>
          </div>
          
          <div class="metric-card">
            <h3>Client Satisfaction</h3>
            <div class="progress-container">
              <div class="progress-bar" [style.width]="'88%'"></div>
              <span class="progress-value">88%</span>
            </div>
            <p class="metric-comparison">+3% from previous period</p>
          </div>
          
          <div class="metric-card">
            <h3>Therapist Utilization</h3>
            <div class="progress-container">
              <div class="progress-bar" [style.width]="'78%'"></div>
              <span class="progress-value">78%</span>
            </div>
            <p class="metric-comparison">+7% from previous period</p>
          </div>
        </div>
      </div>

      <!-- Top Performers -->
      <div class="top-performers-section">
        <div class="section-header">
          <h2>Top Performing Therapists</h2>
          <button class="view-all-btn">View All</button>
        </div>
        
        <div class="performers-table">
          <table>
            <thead>
              <tr>
                <th>Therapist</th>
                <th>Sessions</th>
                <th>Revenue</th>
                <th>Client Satisfaction</th>
                <th>Retention Rate</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let therapist of topTherapists">
                <td class="therapist-cell">
                  <img [src]="therapist.imageUrl" alt="{{ therapist.name }}" onerror="this.src='assets/images/user.png'">
                  <span>{{ therapist.name }}</span>
                </td>
                <td>{{ therapist.sessions }}</td>
                <td>${{ therapist.revenue }}</td>
                <td>
                  <div class="star-rating">
                    <i class="fas fa-star" *ngFor="let star of getStars(therapist.satisfaction)"></i>
                    <i class="far fa-star" *ngFor="let star of getEmptyStars(therapist.satisfaction)"></i>
                    <span>{{ therapist.satisfaction }}</span>
                  </div>
                </td>
                <td>{{ therapist.retention }}%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
